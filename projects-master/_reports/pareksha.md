---
categories:
  - GSoC
  - 2018
  - StatusReport
date: 2018-08-12
report_year: '2018'
student: Pareksha Manchanda
organisation: coala
organisation_link: https://coala.io
project: Convert Bears To Aspects
project_link: https://summerofcode.withgoogle.com/projects/#5476000192790528
tarball: https://rawgit.com/pareksha/GSoC-2018-Report/master/pareksha_GSoC_tarball.tar.gz
sha256sum: ed967dcd98bfcd617e2a3238025b622e12665789e4d707e5b7c4bcf97ebcdf25
mentors: >
  [John Vandenberg](http://github.com/jayvdb),
  [Jami Schwarzwalder](https://github.com/jschwarzwalder),
  [Adhika Setya Pramudita](https://github.com/adhikasp)
phase:
  - Bonding: https://gitlab.com/coala/GSoC/GSoC-2018/milestones/1
  - Phase 1: https://gitlab.com/coala/GSoC/GSoC-2018/milestones/51
  - Phase 2: https://gitlab.com/coala/GSoC/GSoC-2018/milestones/68
  - Phase 3: https://gitlab.com/coala/GSoC/GSoC-2018/milestones/69
bio: >
  I am Pareksha Manchanda, currently a 2nd year Computer Science student in
  University Institute of Engineering and Technology, Panjab University,
  Chandigarh. My GSoC journey with coala has taught me the importance of
  keeping code neat and clean. I worked on aspects which is more or less
  the future of coala.
social:
  - GitHub:
      - username: pareksha
      - link: https://github.com/pareksha
  - GitLab:
      - username: pareksha
      - link: https://gitlab.com/pareksha
  - Gitter:
      - username: pareksha
      - link: https://gitter.im/pareksha
  - OpenHub:
      - username: pareksha
      - link: https://www.openhub.net/accounts/pareksha
email: pareksha.manchanda@gmail.com
blog: https://pareksha.wordpress.com/
activity:

  - 1:
      - repo: cEPs
      - link: https://github.com/coala/cEPs/commit/5ae1373f8b885eee5e01634b740b60290b4a5741
      - details: >
         cEP-0010.md: Update to match existing aspects

  - 2:
      - repo: coala
      - link: https://github.com/coala/coala/commit/065fc6e3ea781d2768f2240aef2477ce1be32604
      - details: >
         Formatting: Describe `preferred_quotation`

  - 3:
      - repo: coala
      - link: https://github.com/coala/coala/commit/2d3a7c2023e91b28e3026029551fe9dce53c0ec1
      - details: >
         aspects.root: Override `Formatting` aspect

  - 4:
      - repo: coala
      - link: https://github.com/coala/coala/commit/7b3da2d5ffb3ea85c7c898cf0702611c92f29138
      - details: >
         aspects: Create `map_ambiguous_setting_to_aspect`

  - 5:
      - repo: coala
      - link: https://github.com/coala/coala/commit/6293eb68fab6f38301575e800ab1c045e42c9aa8
      - details: >
         Language: Change `TrumpScript` aliases

  - 6:
      - repo: coala
      - link: https://github.com/coala/coala/commit/bcbca4f60363c966f74c52d99a87e543f551e892
      - details: >
         Tcl: Create basic language file for tcl

  - 7:
      - repo: coala
      - link: https://github.com/coala/coala/commit/c9455ca65175b4d2ed53e1a9472035f957c8c14f
      - details: >
         m4: Create basic language file for m4

  - 8:
      - repo: coala
      - link: https://github.com/coala/coala/commit/c0a78c5c718f93d1bb79926a6e71746b2184a25f
      - details: >
         VisualBasic: Create language file for Visual Basic

  - 9:
      - repo: coala
      - link: https://github.com/coala/coala/commit/02aba47f65adea2b0e591ade75be4f65c6319890
      - details: >
         PowerShell: Create language file for PowerShell

  - 10:
      - repo: coala
      - link: https://gitlab.com/coala/PyPrint/commit/6c12c922325f3dfb0774ed79c133c80629995749
      - details: >
         .gitlab-ci.yml: Add Python 3.6 to GitLab CI

  - 11:
      - repo: coala
      - link: https://gitlab.com/coala/PyPrint/commit/d651f80f5797c21af61ad272d8341ac4e4155372
      - details: >
         .gitlab-ci.yml: Add Python 3.7 to GitLab CI

  - 12:
      - repo: coala
      - link: https://github.com/coala/coala/commit/1aa95e3b08787cce7fb0d5b059a06a513da73735
      - details: >
         languages: Allow more than one comment delimiter

  - 13:
      - repo: coala-utils
      - link: https://github.com/coala/coala/commit/1aa95e3b08787cce7fb0d5b059a06a513da73735
      - details: >
         setup.py: Sync moban, replace `"` with `'`

  - 14:
      - repo: coala-utils
      - link: https://gitlab.com/coala/coala-utils/commit/26f51a0b82d8738d84d4b5a68305b436dc59f006
      - details: >
         position_is_escaped: Let escape char other than `\`

  - 15:
      - repo: coala-bears
      - link: https://github.com/coala/coala-bears/commit/4f1616515730c9caff48d2d593143749a3428f9e
      - details: >
         ClangComplexityBear: Fix AttributeError

  - 16:
      - repo: coala
      - link: https://github.com/coala/coala/commit/a04ba9ef871a5e2a589a4645006caf7ab4c82b51
      - details: >
         aspects: Rename class `docs` to follow CapWords

  - 17:
      - repo: coala
      - link: https://github.com/coala/coala/commit/b98fdfd2cd05f93b01e921af4f1ee11dc9ef1e29
      - details: >
         VisualBasic: Add `max_line_length`

  - 18:
      - repo: coala
      - link: https://github.com/coala/coala/commit/e83dfcc1f0f00cf7aa9abf4f51ef7a6effa804d4
      - details: >
         languages: Add missing language imports

  - 19:
      - repo: coala
      - link: https://github.com/coala/coala/commit/656ed289b5a4ab2660e848f409c53256f59dda0a
      - details: >
         languages: Implement `get_all_languages()`

  - 20:
      - repo: coala
      - link: https://github.com/coala/coala/commit/0986d56140a7a5e57c97928e9477cc4ac74e73b8
      - details: >
         aspects: Default languages=all when using aspects

  - 21:
      - repo: coala
      - link: https://github.com/coala/coala/commit/19e73ee67baf9f36d0dad90f8f7005bdb15235dc
      - details: >
         LocalBearTestHelper: Modify for `aspects` testing

  - 22:
      - repo: coala-bears
      - link: https://github.com/coala/coala-bears/commit/6b01667c435df81e8d6a6ac5bf76d061f0b47221
      - details: >
         LineLengthBear: Migrate to aspects

  - 23:
      - repo: coala-bears
      - link: https://github.com/coala/coala-bears/commit/c9e8df083c5cae5651b81c0efdc9da3d0f79cd0b
      - details: >
         PycodestyleBear: Migrate bear to aspects

  - 24:
      - repo: coala
      - link: https://github.com/coala/coala/commit/ca677d3f4c81fb775a327858e172c21b55528dec
      - details: >
         language: Add `string_delimiter_escape` to lang

  - 25:
      - repo: cEPs
      - link: https://github.com/coala/cEPs/commit/e357e6a4e6d64c604a5122d97125a628ea1c2fd6
      - details: >
         cEP-0010.md: Add `min_file_length` in cEP

  - 26:
      - repo: coala
      - link: https://github.com/coala/coala/commit/bd23043f0242966d6d1c38753572fbbff11cf57d
      - details: >
         Formatting: Add taste `min_file_length`

---

### Convert Bears To Aspects

coala provides `coala-bears` as a tool for linting and fixing code. These bears are nothing but
tools for cleaning code, serving different purposes.

For now `coala-bears` are run on code by name of bears. This project is part of adding the `aspect`
functionality to some of these `coala-bears`. Through this functionality coala users will no
longer have to worry about searching for the bear or remembering the name of the bear appropriate
for their work. They will be able to fix their code by running coala by the name of an `aspect`,
which is nothing but a keyword that relates to the action they want the bear to perform on their
code.

#### Work Done

This GSoC project led to the migration of two bears, `LineLengthBear` and `PycodestyleBear` into
their respective aspects along with implementation of tests for the same. Apart from this, `aspects`
core is enhanced with bug fixes and some of the feature limitations have been overcome.

Project work consists of adding bug fixes and enhancements to `aspects` library and adding support
for aspect testing in `VerifyLocalBearTestHelper` on [coala/coala](https://github.com/coala/coala).
Two bears, namely `LineLengthBear` and `PycodestyleBear` have been migrated to their respective
aspects along with tests, ensuring their proper functionality in
[coala/coala-bears](https://github.com/coala/coala-bears).

Work done also includes an attempt to migrate `QuotesBear` to it's respective aspects. In the
process, it was found that it needed new aspects to be defined and enhancements to be made in the
coala `Language` library for working on these aspects. Work for adding new aspects for the
`QuotesBear` has been going on in
[aspects cEP](https://github.com/coala/cEPs/pull/148) but it's progress had been slow due to
limitations in the `Language` library. To overcome these limitations, work has been going on for
enhancing `Language` library. It includes
[converting `comment_delimiter` to `comment_delimiters`](https://github.com/coala/coala/commit/1aa95e3b08787cce7fb0d5b059a06a513da73735)
so that it supports a tuple allowing multiple escape characters and the same enhancement of
[allowing escape character to be other than `\`](https://gitlab.com/coala/coala-utils/commit/26f51a0b82d8738d84d4b5a68305b436dc59f006)
was made in [coala/coala-utils](https://github.com/coala/coala-utils) as well. Another enhancement
was letting the [`string_delimiter_escape` add on to the language definitions](https://github.com/coala/coala/commit/ca677d3f4c81fb775a327858e172c21b55528dec). New language
files of Tcl, m4, Visual Basic and PowerShell were also added in the coala `Language` library
along with their respective delimiter escapes for strings.

Adding to the PR's merged in this project, some unseen bugs and feature limitations were found
and issues for the same were created. These issues include -

1. [Support Tcl `comment_delimiters`](https://github.com/coala/coala/issues/5580)
2. [Modify `Linter` module for aspects support](https://github.com/coala/coala/issues/5694)
3. [Rename the `Formatting` aspect of the doctest](https://github.com/coala/coala/issues/5519)
4. [Implement `suggested_values` or replace it with `allowed_values`](https://github.com/coala/coala/issues/5554)
5. [Let `unescape` support escape_char other than `\`](https://gitlab.com/coala/coala-utils/issues/67)
6. [Allow `unescaped_search_for` to pass escape char to `position_is_escaped`](https://gitlab.com/coala/coala-utils/issues/68)
7. [Allow `unescaped_strip` and `unescaped_rstrip` to pass escape char to `position_is_escaped`](https://gitlab.com/coala/coala-utils/issues/69)

#### Challenges

There are areas in coala core which are alien to aspects. For example, there's `@linter` which
is totally alien to aspects. During the migration of `PycodestyleBear` into aspects, we realised
we needed aspect support in `Linter` module so that it passes the related `aspect` with the result.
But thankfully at the last moment, we figured another way out and successfully migrated the bear.

Another challange was dealing with the `QuotesBear` and overcoming the limitations of `Languages`
library. But thanks to the combined efforts of me and my mentors, we were able to get into the
root problems, file issues for these and even successfully solve some of these.

#### Work to be done

Work to be done includes working on the new issues filed and the bugs found during this project,
including defining new aspects and tastes, starting with the idea of aspects defined in
[cEP](https://github.com/coala/cEPs/pull/148) itself. These issues, PRs' and the `QuotesBear`
migration attempt would definitely become the foundation of the next aspects project.

Adding to already filed issues, there may be feature limitations in aspects core and lack of
support of aspects in some areas of coala core. These limitations/bugs can only be found and thus
fixed if we migrate more and more coala bears to aspects. The need of every bear to be migrated
will lead to enhancement of aspect core and addition of new aspect definitions. Thus, more
migration work is required along with side-by-side enhancements in `aspects` library.

In this project, migration of `PEP8Bear` was also scheduled but due to some line length bug
in the [`PEP8`](https://pep8.readthedocs.io/) tool itself, the migration was blocked.
As soon as the bug gets resolved,
[`PEP8Bear` PR](https://github.com/coala/coala-bears/pull/2654) can be resumed.
